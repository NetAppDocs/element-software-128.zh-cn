---
permalink: storage/task_snapmirror_transfer_or_one_time_migration_from_ontap_to_element.html 
sidebar: sidebar 
keywords: element, ui, transfer, perform, source, volume, snapmirror, dr, disaster, recovery, one-time, migration 
summary: 通常情况下，当您使用SnapMirror从运行NetApp Element软件的SolidFire存储集群向ONTAP软件进行灾难恢复时，Element 是源， ONTAP是目标。然而，在某些情况下， ONTAP存储系统可以作为源，而 Element 作为目标。 
---
= 从ONTAP到 Element 执行传输或一次性迁移
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
通常情况下，当您使用SnapMirror从运行NetApp Element软件的SolidFire存储集群向ONTAP软件进行灾难恢复时，Element 是源， ONTAP是目标。然而，在某些情况下， ONTAP存储系统可以作为源，而 Element 作为目标。

* 存在两种情况：
+
** 此前不存在灾难恢复合作关系。请按照此流程中的所有步骤操作。
** 之前确实存在灾难恢复关系，但与用于此次缓解的卷之间不存在这种关系。在这种情况下，只需按照以下步骤 3 和 4 操作即可。




.你需要什么
* 元素目标节点必须已对ONTAP开放。
* Element 卷必须已启用SnapMirror复制功能。


您必须以 hostip:/lun/<id_number> 的形式指定 Element 目标路径，其中 lun 是实际字符串“`lun`”，id_number 是 Element 卷的 ID。

.步骤
. 使用ONTAP创建与元素集群的关系：
+
[listing]
----
snapmirror create -source-path SVM:volume|cluster://SVM/volume
-destination-path hostip:/lun/name -type XDP -schedule schedule -policy
    policy
----
+
[listing]
----
cluster_dst::> snapmirror create -source-path svm_1:volA_dst
-destination-path 10.0.0.11:/lun/0005 -type XDP -schedule my_daily -policy MirrorLatest
----
. 使用ONTAP snapmirror show 命令验证SnapMirror关系是否已创建。
+
有关创建复制关系的信息，请参阅ONTAP文档；有关完整的命令语法，请参阅ONTAP手册页。

. 使用 `ElementCreateVolume`使用 API 创建目标卷并将目标卷访问模式设置为SnapMirror：
+
使用 Element API 创建 Element 体积

+
[listing]
----
{
   "method": "CreateVolume",
   "params": {
        "name": "SMTargetVolumeTest2",
        "accountID": 1,
        "totalSize": 100000000000,
        "enable512e": true,
        "attributes": {},
        "qosPolicyID": 1,
        "enableSnapMirrorReplication": true,
        "access": "snapMirrorTarget"
    },
    "id": 1
}
----
. 使用ONTAP初始化复制关系 `snapmirror initialize`命令：
+
[listing]
----
snapmirror initialize -source-path hostip:/lun/name
-destination-path SVM:volume|cluster://SVM/volume
----


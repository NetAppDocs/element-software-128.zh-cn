---
permalink: setup/task_setup_configure_fqdn_web_ui_access.html 
sidebar: sidebar 
keywords: netapp, element, fqdn, ui, access, web, administration 
summary: 了解如何配置、移除和排除系统 FQDN Web UI 访问故障。 
---
= 配置完全限定域名 (FQDN) Web UI 访问
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SolidFire全闪存存储配合NetApp Element软件 12.2 或更高版本，使您能够使用完全限定域名 (FQDN) 访问存储集群 Web 界面。如果您想使用 FQDN 访问 Element Web UI、每个节点 UI 或管理节点 UI 等 Web 用户界面，则必须首先添加存储集群设置以标识集群使用的 FQDN。

该过程使集群能够正确重定向登录会话，并改进与外部服务（例如密钥管理器和身份提供商）的集成，以实现多因素身份验证。

.你需要什么
* 此功能需要 Element 12.2 或更高版本。
* 使用NetApp Hybrid Cloud Control REST API 配置此功能需要管理服务 2.15 或更高版本。
* 使用NetApp Hybrid Cloud Control UI 配置此功能需要管理服务 2.19 或更高版本。
* 要使用 REST API，您必须部署运行 11.5 或更高版本的管理节点。
* 您需要为管理节点和每个存储集群配置完全限定域名，这些域名能够正确解析为管理节点 IP 地址和每个存储集群 IP 地址。


您可以使用NetApp Hybrid Cloud Control 和 REST API 配置或删除 FQDN Web UI 访问权限。您还可以排查配置错误的 FQDN 问题。

* <<使用NetApp Hybrid Cloud Control 配置 FQDN Web UI 访问>>
* <<使用 REST API 配置 FQDN Web UI 访问>>
* <<使用NetApp Hybrid Cloud Control 移除 FQDN Web UI 访问权限>>
* <<使用 REST API 移除 FQDN Web UI 访问权限>>
* <<故障排除>>




== 使用NetApp Hybrid Cloud Control 配置 FQDN Web UI 访问

.步骤
. 在网页浏览器中打开管理节点的IP地址：
+
[listing]
----
https://<ManagementNodeIP>
----
. 使用存储集群管理员凭据登录NetApp Hybrid Cloud Control。
. 选择页面右上角的菜单图标。
. 选择“配置”。
. 在“完全限定域名”窗格中，选择“设置”。
. 在弹出的窗口中，输入管理节点和每个存储集群的 FQDN。
. 选择*保存*。
+
“完全限定域名”窗格列出了每个存储集群及其关联的 MVIP 和 FQDN。

+

NOTE: 只有设置了 FQDN 的连接存储集群才会列在“完全限定域名”窗格中。





== 使用 REST API 配置 FQDN Web UI 访问

.步骤
. 确保 Element 存储节点和 mNode 已针对网络环境正确配置 DNS，以便能够解析环境中的 FQDN。要设置 DNS，请转到存储节点的每个节点 UI 和管理节点，然后选择“网络设置”>“管理网络”。
+
.. 每个存储节点的用户界面： `https://<storage_node_management_IP>:442`
.. 每个管理节点的用户界面： `https://<management_node_IP>:442`


. 使用 Element API 更改存储集群设置。
+
.. 访问 Element API 并使用以下方式创建集群接口首选项：link:../api/reference_element_api_createclusterinterfacepreference.html["创建集群接口首选项"] API 方法，插入集群 MVIP FQDN 作为优先级值：
+
*** 姓名： `mvip_fqdn`
*** 价值： `Fully Qualified Domain Name for the Cluster MVIP`
+
在这个例子中，FQDN=storagecluster.my.org：

+
[listing]
----
https://<Cluster_MVIP>/json-rpc/12.2?
method=CreateClusterInterfacePreference&name=mvip_fqdn&value=storagecluster.my.org
----




. 使用管理节点上的 REST API 更改管理节点设置：
+
.. 通过输入管理节点 IP 地址，然后输入以下内容，即可访问管理节点的 REST API 用户界面： `/mnode/2/`
+
例如：

+
`https://<management_node_IP>/mnode/2/`

.. 点击“授权”或任何锁形图标，然后输入集群用户名和密码。
.. 请输入客户端 ID `mnode-client` 。
.. 点击“授权”开始会话，然后关闭窗口。
.. 从服务器列表中选择 `mnode2`。
.. 点击 *GET /settings*。
.. 点击“立即试用”。
.. 点击“执行”。
.. 记录响应正文中报告的任何代理设置。
.. 点击*PUT/设置*。
.. 点击“立即试用”。
.. 在请求正文区域中，输入管理节点的 FQDN 作为值。 `mnode_fqdn`范围。
.. 将您之前记录的任何代理设置值输入到请求正文的其余参数中。如果将代理参数留空或未将其包含在请求正文中，则现有的代理设置将被删除。
.. 点击“执行”。






== 使用NetApp Hybrid Cloud Control 移除 FQDN Web UI 访问权限

您可以使用此过程删除管理节点和存储集群的 FQDN Web 访问权限。

.步骤
. 在“完全限定域名”窗格中，选择“编辑”。
. 在弹出的窗口中，删除 *FQDN* 文本字段中的内容。
. 选择*保存*。
+
窗口关闭，FQDN 不再列在“完全限定域名”窗格中。





== 使用 REST API 移除 FQDN Web UI 访问权限

.步骤
. 使用 Element API 更改存储集群设置。
+
.. 访问 Element API 并使用以下命令删除以下集群接口首选项： `DeleteClusterInterfacePreference` API 方法：
+
*** 姓名： `mvip_fqdn`
+
例如：

+
[listing]
----
https://<Cluster_MVIP>/json-rpc/12.2?method=DeleteClusterInterfacePreference&name=mvip_fqdn
----




. 使用管理节点上的 REST API 更改管理节点设置：
+
.. 通过输入管理节点 IP 地址，然后输入以下内容，即可访问管理节点的 REST API 用户界面： `/mnode/2/` 。例如：
+
[listing]
----
https://<management_node_IP>/mnode/2/
----
.. 选择“授权”或任何锁定图标，然后输入 Element 集群用户名和密码。
.. 请输入客户端 ID `mnode-client` 。
.. 选择“授权”以开始会话。
.. 关闭窗口。
.. 选择 *PUT /settings*。
.. 选择*试用一下*。
.. 在请求正文区域中，不要输入值。 `mnode_fqdn`范围。此外，还要指定是否应该使用代理。(`true`或者 `false`）为了 `use_proxy`范围。
+
[listing]
----
{
 "mnode_fqdn": "",
 "use_proxy": false
}
----
.. 选择*执行*。






== 故障排除

如果 FQDN 配置不正确，则在访问管理节点、存储集群或两者都时可能会遇到问题。请使用以下信息来帮助解决问题。

[cols="3*"]
|===
| 问题描述 | 发生原因 | 解决方法 


 a| 
* 使用 FQDN 访问管理节点或存储集群时，浏览器会报错。
* 您无法使用 IP 地址登录管理节点或存储集群。

| 管理节点 FQDN 和存储集群 FQDN 配置均不正确。 | 请使用本页上的 REST API 说明删除管理节点和存储集群 FQDN 设置，然后重新配置它们。 


 a| 
* 尝试访问存储集群 FQDN 时，浏览器出现错误。
* 您无法使用 IP 地址登录管理节点或存储集群。

| 管理节点 FQDN 配置正确，但存储集群 FQDN 配置错误。 | 请使用此页面上的 REST API 说明删除存储集群 FQDN 设置并重新配置它们。 


 a| 
* 尝试访问管理节点 FQDN 时，浏览器出现错误。
* 您可以使用 IP 地址登录到管理节点和存储集群。

| 管理节点 FQDN 配置错误，但存储集群 FQDN 配置正确。 | 登录NetApp Hybrid Cloud Control，在 UI 中更正管理节点 FQDN 设置，或使用此页面上的 REST API 说明更正设置。 
|===


== 查找更多信息

* https://docs.netapp.com/us-en/element-software/index.html["SolidFire和 Element 软件文档"]
* https://docs.netapp.com/us-en/vcp/index.html["NetApp Element vCenter Server 插件"^]

